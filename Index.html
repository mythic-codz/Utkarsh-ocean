<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Aura Study Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      background: #000;
      user-select: none;
      -webkit-user-select: none;
      -ms-user-select: none;
    }

    iframe {
      width: 100%;
      height: 100%;
      border: none;
    }
  </style>
</head>

<body>

<iframe src="https://aura-study-hub.vercel.app/" allowfullscreen></iframe>

<script>
/* ===============================
   SERVER-SIDE BLOCK CHECK
================================ */
fetch("/api/block");

/* ===============================
   CLIENT-SIDE DEVTOOLS BLOCK
================================ */

// If already blocked â†’ redirect
if (document.cookie.includes("devtool_blocked=true")) {
  window.location.replace("/blank.html");
}

// Block user until cache cleared
function blockUser() {
  document.cookie =
    "devtool_blocked=true; path=/; max-age=31536000; SameSite=Lax";
  window.location.replace("/blank.html");
}

// Disable right click
document.addEventListener("contextmenu", e => e.preventDefault());

// Disable copy
document.addEventListener("copy", e => {
  e.preventDefault();
  blockUser();
});

// Block key combos
document.addEventListener("keydown", e => {
  const k = e.key.toLowerCase();

  if (
    e.key === "F12" ||
    e.metaKey ||
    (e.ctrlKey && [
      "c", // copy
      "u", // view source
      "i", // inspect
      "j", // console
      "s", // save
      "p", // print
      "a"  // select all
    ].includes(k)) ||
    (e.ctrlKey && e.shiftKey)
  ) {
    e.preventDefault();
    blockUser();
  }
});

// DevTools resize detection
const THRESHOLD = 160;
setInterval(() => {
  if (
    window.outerWidth - window.innerWidth > THRESHOLD ||
    window.outerHeight - window.innerHeight > THRESHOLD
  ) {
    blockUser();
  }
}, 500);

// Debugger trap
(function () {
  const start = Date.now();
  debugger;
  if (Date.now() - start > 100) {
    blockUser();
  }
})();
</script>

</body>
</html>
